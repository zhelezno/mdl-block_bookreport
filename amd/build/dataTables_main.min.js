define(["jquery","block_bookreport/jszip","block_bookreport/jquery-ui","block_bookreport/buttons.print","block_bookreport/buttons.html5","block_bookreport/buttons.bootstrap4","block_bookreport/dataTables.colReorder"],function(e,t){return{dtInit:function(o,r){function a(o,r,a=0,n=0){e.ajax({url:"ajaxselect.php",type:"POST",data:{start_date:a,end_date:n,userid:r},dataType:"json",success:function(r){window.JSZip=t;var a=e("#reporttable").DataTable({data:r,dom:"<'row'<'col-sm-12 col-md-4'l><'col-sm-12 col-md-4'B><'col-sm-12 col-md-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",buttons:["excelHtml5","copyHtml5","print"],order:[[4,"desc"]],language:{processing:"Подождите...",search:"Поиск:",lengthMenu:"Показать _MENU_ записей",info:"Записи с _START_ до _END_ из _TOTAL_ записей",infoEmpty:"Записи с 0 до 0 из 0 записей",infoFiltered:"(отфильтровано из _MAX_ записей)",loadingRecords:"Загрузка записей...",zeroRecords:"Записи отсутствуют.",emptyTable:"В таблице отсутствуют данные",paginate:{first:"Первая",previous:"Предыдущая",next:"Следующая",last:"Последняя"},aria:{sortAscending:": активировать для сортировки столбца по возрастанию",sortDescending:": активировать для сортировки столбца по убыванию"},select:{rows:{_:"Выбрано записей: %d",0:"Кликните по записи для выбора",1:"Выбрана одна запись"},1:"%d ряд выбран",_:"%d ряда(-ов) выбрано",cells:{1:"1 ячейка выбрана",_:"Выбрано %d ячеек"},columns:{1:"1 столбец выбран",_:"%d столбцов выбрано"}},searchBuilder:{conditions:{string:{notEmpty:"Не пусто",startsWith:"Начинается с",contains:"Содержит",empty:"Пусто",endsWith:"Заканчивается на",equals:"Равно",not:"Не"},date:{after:"После",before:"До",between:"Между",empty:"Пусто",equals:"Равно",not:"Не",notBetween:"Не между",notEmpty:"Не пусто"},number:{between:"В промежутке от",empty:"Пусто",equals:"Равно",gt:"Больше чем",gte:"Больше, чем равно",lt:"Меньше чем",lte:"Меньше, чем равно",not:"Не",notBetween:"Не в промежутке от",notEmpty:"Не пусто"}},data:"Данные",deleteTitle:"Удалить условие фильтрации",logicAnd:"И",logicOr:"Или",title:{0:"Конструктор поиска",_:"Конструктор поиска (%d)"},value:"Значение",add:"Добавить условие",button:{0:"Конструктор поиска",_:"Конструктор поиска (%d)"},clearAll:"Очистить всё",condition:"Условие"},searchPanes:{clearMessage:"Очистить всё",collapse:{0:"Панели поиска",_:"Панели поиска (%d)"},count:"{total}",countFiltered:"{shown} ({total})",emptyPanes:"Нет панелей поиска",loadMessage:"Загрузка панелей поиска",title:"Фильтры активны - %d"},thousands:",",buttons:{pageLength:{_:"Показать 10 строк","-1":"Показать все ряды",1:"Показать 1 ряд"},pdf:"PDF",print:"Печать",collection:'Коллекция <span class="ui-button-icon-primary ui-icon ui-icon-triangle-1-s"></span>',colvis:"Видимость столбцов",colvisRestore:"Восстановить видимость",copy:"Копировать",copyKeys:"Нажмите ctrl or u2318 + C, чтобы скопировать данные таблицы в буфер обмена.  Для отмены, щелкните по сообщению или нажмите escape.",copySuccess:{1:"Скопирована 1 ряд в буфер обмена",_:"Скопировано %ds рядов в буфер обмена"},copyTitle:"Скопировать в буфер обмена",csv:"CSV",excel:"Excel"},decimal:".",infoThousands:",",autoFill:{cancel:"Отменить",fill:"Заполнить все ячейки <i>%d<i></i></i>",fillHorizontal:"Заполнить ячейки по горизонтали",fillVertical:"Заполнить ячейки по вертикали",info:"Пример автозаполнения"}},responsive:!0,columns:[{data:"author",render:function(e,t,o,r){return 1==o.type?'<a href="../bookreport/view_streport.php?id='+o.id+"&userid="+o.user_id+'">'+o.author+"</a>":'<a href="../bookreport/view_prsreport.php?id='+o.id+"&userid="+o.user_id+'">'+o.author+"</a>"}},{data:"book",render:function(e,t,o,r){return 1==o.type?'<a href="../bookreport/view_streport.php?id='+o.id+"&userid="+o.user_id+'">'+o.book+"</a>":'<a href="../bookreport/view_prsreport.php?id='+o.id+"&userid="+o.user_id+'">'+o.book+"</a>"}},{data:"fullname",render:function(e,t,o,r){return 1==o.type?'<a href="../bookreport/view_streport.php?id='+o.id+"&userid="+o.user_id+'">'+o.fullname+"</a>":'<a href="../bookreport/view_prsreport.php?id='+o.id+"&userid="+o.user_id+'">'+o.fullname+"</a>"}},{data:"department"},{data:"timecreated"},{data:"type",render:function(e,t,o,r){return 1==o.type?'<img style="margin-right: 10px;" width="30px" src="../bookreport/style/img/reportpix1.png">':'<img style="margin-right: 10px;" width="30px" src="../bookreport/style/img/reportpix2.png">'}}]});a.column(2).visible(o),a.column(3).visible(o),new e.fn.dataTable.ColReorder(a,{})}})}a(o,r),e(document).on("click","#filter",function(t){t.preventDefault();var n=e("#start_date").val(),i=e("#end_date").val();""==n||""==i?alert("both date required"):(e("#reporttable").DataTable().destroy(),n=new Date(n).getTime()/1e3,i=new Date(i).getTime()/1e3,a(o,r,n,i))}),e(document).on("click","#reset",function(t){t.preventDefault(),e("#start_date").val(""),e("#end_date").val(""),e("#reporttable").DataTable().destroy(),a(o,r)})},dpInit:function(){e("#start_date").datepicker({dateFormat:"yy-mm-dd",closeText:"Закрыть",prevText:"",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),e("#end_date").datepicker({dateFormat:"yy-mm-dd",closeText:"Закрыть",prevText:"",currentText:"Сегодня",monthNames:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthNamesShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],dayNames:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],dayNamesShort:["вск","пнд","втр","срд","чтв","птн","сбт"],dayNamesMin:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],weekHeader:"Не",firstDay:1,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""}),e("#calendariconstart").on("click",function(){e("#start_date").focus()}),e("#calendariconend").on("click",function(){e("#end_date").focus()})}}});