define(["jquery","block_bookreport/jszip","block_bookreport/jquery-ui","block_bookreport/buttons.print","block_bookreport/buttons.html5","block_bookreport/buttons.bootstrap4"],function(t,e){return{dtInit:function(r,o){function a(r,o,a,d){t.ajax({url:"ajaxselect.php",type:"POST",data:{start_date:a,end_date:d,userid:o},dataType:"json",success:function(o){window.JSZip=e;var a=t("#reporttable").DataTable({data:o,dom:"<'row'<'col-sm-12 col-md-4'l><'col-sm-12 col-md-4'B><'col-sm-12 col-md-4'f>><'row'<'col-sm-12'tr>><'row'<'col-sm-12 col-md-5'i><'col-sm-12 col-md-7'p>>",buttons:["excelHtml5","copyHtml5","print"],responsive:!0,columns:[{data:"author",render:function(t,e,r,o){return'<a href="../bookreport/userreport.php?id='+r.id+"&userid="+r.user_id+'">'+r.author+"</a>"}},{data:"book",render:function(t,e,r,o){return'<a href="../bookreport/userreport.php?id='+r.id+"&userid="+r.user_id+'">'+r.book+"</a>"}},{data:"fullname",render:function(t,e,r,o){return'<a href="../bookreport/userreport.php?id='+r.id+"&userid="+r.user_id+'">'+r.fullname+"</a>"}},{data:"department"},{data:"timecreated"},{data:"type",render:function(t,e,r,o){return(r.type=1)?'<img style="margin-right: 10px;" width="30px" src="../bookreport/style/img/reportpix1.png">':'<img style="margin-right: 10px;" width="30px" src="../bookreport/style/img/reportpix2.png">'}}]});a.column(2).visible(r),a.column(3).visible(r)}})}a(r,o),t(document).on("click","#filter",function(e){e.preventDefault();var d=t("#start_date").val(),n=t("#end_date").val();""==d||""==n?alert("both date required"):(t("#reporttable").DataTable().destroy(),d=new Date(d).getTime()/1e3,n=new Date(n).getTime()/1e3,a(r,o,d,n))}),t(document).on("click","#reset",function(e){e.preventDefault(),t("#start_date").val(""),t("#end_date").val(""),t("#reporttable").DataTable().destroy(),a(r,o)})},dpInit:function(){t("#start_date").datepicker({dateFormat:"yy-mm-dd"}),t("#end_date").datepicker({dateFormat:"yy-mm-dd"})}}});